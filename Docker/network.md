# Network - IP

Q. 공인 ip/ 사설 ip?

Q. 왜 ip 주소가 필요한가?
도메인 -> DNS -> ip주소 -> 접속

Q. IP주소는 주민등록번호 같은건가?

`ifconfig`\
IPv4 주소 . . . . . . . . . : 10.10.221.167\
서브넷 마스크 . . . . . . . : 255.255.252.0\
기본 게이트웨이 . . . . . . : 10.10.220
1. IP주소란
    - 32비트의 ip주소를 8비트씩 4그룹으로 분할하여 2진수로 처리(0~255, 256개 사용 가능)
    - 경계에는 피어리어드(.)를 넣은 후 십진수로 표현
    - 표현가능한 조합의 수 는 약 43억개

2. IP주소: 네트워크 부분 + 호스트 부분
    - IPv4 주소 : 10.10.221.167
    - 네트워크 부분 : 10.10.221
        - 모든 세그먼트(강의장)의 주소와 중복되지 않도록 설정
        - 동일 세그먼트 내에서 동일한 네트워크 주소를 설정
    - 호스트 부분 : 167
        - 호스트 부분에서 낭비되는 주소가 생기기 떄문에, 실제 연결가능한 컴퓨터수는 43억개보다 적게된다.
        - 동일한 세그먼트 내에서 겹치지 않는 값으로 할당
    - 서브넷 마스크: 네트워크 부분과 호스트 부분을 분리한다.
        - 10진수 주소형식 : 255.255.255.0
        - 비트수 (24): 앞 24비트로 네트워크에 사용, 뒤 8피트는 호스트로 사용
    - 게이트 웨이
        - 아무거나 사용해도 되지만, 일반적으로 첫번째 ip주소를 게이트로 지정한다.
    - 브로드케스트:
        - 일반적으로 마지막 주소를 쓴다.

*일반적으로 192.167.0.1로 접속하면 iptime이 나온다. 

3. IP주소의 클래스
    - 클래스 A 
        - ip주소가 0으로 시작하는 경우
        - 앞 8비트까지가 네트워크부
            - 십진수 : 0.0.0.0 ~ 127.0.0.1
        - 할당 가능 호스트 주소 : 16,777,214 개

    - 클래스 B
        - ip주소가 10으로 시작하는 경우
        - 앞 16비트까지 네트워크부
            - 십진수 : 128.0.0.0 ~ 191.255.0.0
        - 할당 가능 호스트 주소 : 65,534 개

    - 클래스 C
        - ip주소가 110으로 시작하는 경우
        - 앞 24비트까지가 네트워크부
            - 십진수 : 192.0.0.0 ~ 223.255.255.0
        - 할당 가능 호스트 주소 : 254 개

    - 클래스 D
        - ip주소가 1110으로 시작하는 경우
        - 앞 32비트까지가 네트워크부
            - 십진수 : 224.0.0.0 ~ 239.255.255.255
        - 할당 가능 호스트 주소 : 254 개
        - 호스트 주소 부분이 없으며, IP 멀티캐스트 통신에 사용
    
    - 예)
        - 10.3.4.123 (클래스 A) /24
        - 192.168.55.11 (클래스 C) /24

    - 주의점
        - 호스트에 할당 못하는 3가지
            - 네트워크 나타내는 모든수가 0
            - 기본 1
            - 브로드케스트에 사용되는 모든수가 1 

4. IP 부족을 어떻게 해결할 수 있을까?
    - 공인IP, 사설IP로 분류한다.
    - 공인IP: 외부와 통신하기 위해 사용되는 IP
    - 사설IP: 내부와 통신하기 위해 사용되는 IP
        - 프라이빗 ip 주소의 범위
        - A클래스 : 10.0.0.0 ~ 10.255.255.255
        - B클래스 : 172.16.0.0 ~ 172.31.255.255
        - C클래서 : 192.168.0.0 ~ 192.168.255.255

    - 우리집 PC는 사설 IP를 사용하고있는데, 외부와 어떻게 통신하는가?
        - 컴퓨터(사설:host) --- (사설:gateway)공유기(공인), NAT --- KT
    
    - NAT(x) -> NPAT(NAPT)를 사용한다.

5. NAT&Port Forwarding
    - 전세계 host 갯수는 2^32(40억) -> 부족 -> IPv6개발 -> 적용x/아껴쓰자
    1. NAT란?
        - 1개의 실제 공인 IP 주소에 다량의 가상 사설 IP 주소를 할당 및 매핑하는 주소변환 방식
        - 정적 NAT: 1:1 매핑, 의미없음
        - 동적 NAT: 사설 IP 주소를 Pool화하여 공인주소로 자동매핑, 동시사용 불가
    
    2. Port(포트)
        - ? : 외부와 통신해야 하는 process가 생성되면 함께 생성되는 주소
        - TCP/IP(통신) OSI7. 물데네트표응
        - 네트워크(IP) -> 전송/트렌스포즈(Port)
        - [IP/Port] 형식으로 만들어서 전달
        - process 1개당 1개의 Port와 [IT/Port]와 바인딩 되어 사용

    3. NAPT란?
        - IP주소 뿐 아니라 포트 번호까지 포함시켜 내부 호스트를 구분
        - PC, [IP/Prot] -> 공유기, NAPT[IP/Port(Rnadom)] -> 외부
        
    4. Port Forwarding

    [day summary]
    - IP 분류 -> class별 분류 -> IP 부족: 각 class 마다 사설 IP 할당
    - 사설: 내부만 사용
    - 공인: 외부와 통신할때만 사용
    - 사설 IP를 외부와 통신하기위해 NAT(NPAT)사용
    - 외부에서 사설 IP에 접근하기 위해서 protforwarding 사용
    
    





